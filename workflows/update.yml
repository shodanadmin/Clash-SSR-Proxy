name: Daily Update

on:
  schedule:
    - cron: '0 8 * * *'  # æ¯å¤©UTC 8ç‚¹æ›´æ–°ï¼ˆåŒ—äº¬æ—¶é—´16ç‚¹ï¼‰
  workflow_dispatch:  # ä¹Ÿæ”¯æŒæ‰‹åŠ¨è§¦å‘

jobs:
  update:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout repo
        uses: actions/checkout@v4
        
      - name: Update timestamp
        run: |
          # è·å–å½“å‰UTCæ—¶é—´
          CURRENT_TIME=$(date -u +"%Y-%m-%d %H:%M")
          
          # æ›´æ–°READMEä¸­çš„æ—¶é—´æˆ³
          sed -i "s/ğŸ“… æœ€åæ›´æ–°ï¼š.*UTC | æ¯æ—¥æ›´æ–°ä»·æ ¼å’Œä¼˜æƒ ç /ğŸ“… æœ€åæ›´æ–°ï¼š${CURRENT_TIME} UTC | æ¯æ—¥æ›´æ–°ä»·æ ¼å’Œä¼˜æƒ ç /" README.md
          
      - name: Commit and push
        run: |
          git config user.name "GitHub Action"
          git config user.email "qweqwd@sbhello.com"
          git add README.md
          git commit -m "ğŸ”„ Auto update: $(date +%Y-%m-%d) ä»·æ ¼å’Œä¼˜æƒ ç æ—¶é—´æˆ³" || exit 0
          git push
